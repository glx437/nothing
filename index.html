<html>
  <script>
    // ÙƒÙˆØ¯ JavaScript ÙƒØ§Ù…Ù„ Ù„Ù„Ø±Ø¯ Ø¨Ø§Ù„ØµÙˆØ±Ø© Ù…Ø¨Ø§Ø´Ø±Ø© ÙˆÙ„ÙŠØ³ Ø§Ù„Ø±Ø§Ø¨Ø·
let lastUpdateId = 0;

async function processPendingMessages() {
    const botToken = '8423861374:AAGKoa6nt6bLM9Yhmnb3DpVOW9krddHoVD0'; // Ø¶Ø¹ ØªÙˆÙƒÙ† Ø§Ù„Ø¨ÙˆØª Ù‡Ù†Ø§
    
    try {
        // Ø¬Ù„Ø¨ Ø§Ù„Ø±Ø³Ø§Ø¦Ù„ Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø© ÙÙ‚Ø·
        const response = await fetch(`https://api.telegram.org/bot${botToken}/getUpdates?offset=${lastUpdateId + 1}`);
        const data = await response.json();
        
        if (data.ok && data.result.length > 0) {
            for (const update of data.result) {
                if (update.message && update.message.text) {
                    const userText = update.message.text;
                    const chatId = update.message.chat.id;
                    
                    // Ø¥Ù†Ø´Ø§Ø¡ Ø±Ø§Ø¨Ø· Ø§Ù„ØµÙˆØ±Ø©
                    const imageUrl = `https://image.pollinations.ai/prompt/${encodeURIComponent(userText)}?width=512&height=512`;
                    
                    // Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„ØµÙˆØ±Ø© Ù…Ø¨Ø§Ø´Ø±Ø© Ù„Ù„Ù…Ø³ØªØ®Ø¯Ù…
                    await fetch(`https://api.telegram.org/bot${botToken}/sendPhoto`, {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify({
                            chat_id: chatId,
                            photo: imageUrl,
                            caption: `ğŸ–¼ï¸ Ø§Ù„ØµÙˆØ±Ø© Ø§Ù„Ù…ÙÙ†Ø´Ø£Ø© Ù„Ù„ÙˆØµÙ: "${userText}"`,
                            reply_to_message_id: update.message.message_id
                        })
                    });
                }
                
                lastUpdateId = update.update_id;
            }
        }
        
        return `âœ… ØªÙ… Ù…Ø¹Ø§Ù„Ø¬Ø© ${data.result?.length || 0} Ø±Ø³Ø§Ù„Ø©`;
    } catch (error) {
        return `âŒ Ø®Ø·Ø£: ${error.message}`;
    }
}

// Ø¯Ø§Ù„Ø© Ù„Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù… Ù…Ø¹ UptimeRobot
async function handleUptimePing() {
    const result = await processPendingMessages();
    console.log(result);
    return result;
}

// Ù„Ù„ØªØ¬Ø±Ø¨Ø© Ø§Ù„ÙÙˆØ±ÙŠØ© - Ø¥Ù„ØºØ§Ø¡ Ø§Ù„ØªØ¹Ù„ÙŠÙ‚ Ù„Ù„ØªØ¬Ø±Ø¨Ø©
// handleUptimePing();
  </script>
</html>
